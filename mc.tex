%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - This chapter defines how motion compensation - %
% - is done using the motion data                - % 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Preamble, we define some commands used in the motion compensation
%section:

\providecommand{\pic}[0]{\text{\texttt{pic}}}
\providecommand{\block}[0]{\text{\texttt{block}}}
\providecommand{\refs}[0]{\text{\texttt{refs}}}
\providecommand{\mcparams}[0]{\text{\texttt{mc\_params}}}
\providecommand{\mcfunc}[0]{\text{\texttt{motion\_compensate()}}}
\providecommand{\compmc}[0]{\text{\texttt{component\_compensate()}}}

\providecommand{\URef}[0]{\mathfrak{R}}
\providecommand{\picWidth}[0]{\text{\texttt{pic\_width}}}
\providecommand{\picHeight}[0]{\text{\texttt{pic\_height}}}
\providecommand{\W}[0]{\text{\texttt{W}}}
\providecommand{\xblen}[0]{\text{\texttt{xblen}}}
\providecommand{\yblen}[0]{\text{\texttt{yblen}}}
\providecommand{\xbsep}[0]{\text{\texttt{xbsep}}}
\providecommand{\ybsep}[0]{\text{\texttt{ybsep}}}
\providecommand{\gmA}[0]{\pmb{\text{A}}}
\providecommand{\gmB}[0]{\pmb{\text{b}}}
\providecommand{\gmC}[0]{\pmb{\text{c}}}
\providecommand{\B}[0]{\text{\texttt{b}}}
\providecommand{\Bx}[0]{\text{\texttt{b.x}}}
\providecommand{\By}[0]{\text{\texttt{b.y}}}
\providecommand{\Bpredmode}[0]{\text{\texttt{b.predmode}}}
\providecommand{\predIntra}[0]{\text{Intra}}
\providecommand{\predInter}[0]{\text{Inter}}
\providecommand{\predGlobal}[0]{\text{Global}}
\providecommand{\Brefsinuse}[0]{\text{\texttt{b.refsinuse}}}
\providecommand{\Bdc}[0]{\text{\texttt{b.dc}}}
\providecommand{\Bv}[0]{\text{\texttt{b.v}}}

%NB. Meta-data needed so far.

%Picture = Array 0 .. 2 of components
%Component = bool - luma_or_chroma + 2-d array of data of appropriate dims

\input{mc-intro}
\subsection{Block coverage}\input{mc-blockcoverage}
\subsection{Algorithm}\input{mc-alg}
\subsection{Upconversion}\input{mc-upconvert}
\subsection{Forming an unweighted block prediction}\input{mc-pred}
\subsection{Overlapped-block motion compensation weighting matrix}\input{mc-obmc-matrix}
\subsection{Chominance components}\input{mc-chomascaling}
\subsection{Notes on precision}\input{mc-precision}
\subsection{Example implementation}\input{mc-impl}
