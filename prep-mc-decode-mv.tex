This section specifies the decoding process for motion vectors in a
prediction unit whose top-left block has coordinates (x,y).

If MB\_USING\_GLOBAL is TRUE then: if PRED\_MODE\&1 is TRUE, MV1 is equal to
GLOBAL[0][y][x]; if PRED\_MODE\&2 is TRUE, MV2 is GLOBAL[1][y][x].

If MB\_USING\_GLOBAL is FALSE then block motion vectors are differentially
decoded with respect to a prediction.  The decoding process is as
follows.

Motion vector prediction residues are decoded horizontal component
first, followed by the vertical component. The values use signed unary
binarisation. The decoding process for each motion vector is:

1.      MV\_x=mv\_pred()+su\_arith\_decode()

2.      MV\_y=mv\_pred()+su\_arith\_decode()

Different contexts are used for Reference 1 and Reference 2 vectors, for
horizontal and vertical components, for different bins and for sign and
magnitude data, as per . 


MV contexts

Reference 1

Horizontal

Vertical

Magnitude Contexts

Sign Context

Magnitude

Sign Context

Bin   Context

1        REF1x\_BIN1\_CTX

2        REF1x\_BIN2\_CTX

3        REF1x\_BIN3\_CTX

4        REF1x\_BIN4\_CTX

≥5      REF1x\_BIN5+\_CTX

REF1x\_SIGN\_CTX          



Bin   Context

1        REF1y\_BIN1\_CTX

2        REF1y\_BIN2\_CTX

3        REF1y\_BIN3\_CTX

4        REF1y\_BIN4\_CTX

≥5      REF1y\_BIN5+\_CTX

REF1y\_SIGN\_CTX

Reference 2

Horizontal

Vertical

Magnitude

Sign

Magnitude

Sign Context

Bin   Context

2        REF2x\_BIN1\_CTX

2        REF2x\_BIN2\_CTX

3        REF2x\_BIN3\_CTX

4        REF2x\_BIN4\_CTX

≥5      REF2x\_BIN5+\_CTX

REF2y\_SIGN\_CTX         



Bin   Context

2        REF2y\_BIN1\_CTX

2        REF2y\_BIN2\_CTX

3        REF2y\_BIN3\_CTX

4        REF2y\_BIN4\_CTX

≥5      REF2y\_BIN5+\_CTX

REF2y\_SIGN\_CTX         


Table   Contexts for Reference1 and Reference2 Vectors

Prediction

The prediction process mv\_pred() predicts Reference 1 motion as the
median of available Reference 1 motion vectors from prediction units in
the prediction aperture, and Reference 2 motion vectors of available
Reference 2 motion vectors from prediction units in the prediction
aperture. The prediction aperture is as specified in Section .

Reference 1 motion vectors in a prediction unit are available if
PRED\_MODE\&1 is non-zero.

Reference 2 motion vectors in a prediction unit are available if
PRED\_MODE\&2 is non-zero.


