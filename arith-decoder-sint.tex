\subsubsection{Arithmetic decoding of integer values}

\label{arithreadint}

This section defines the operation of the $read\_sinta(context\_set)$ function
 for extracting integer values from a block of arithmetically coded data.

\paragraph{Binarisation and contexts \\}

Integer values are binarised using interleaved exp-Golomb binarisation as per
Section \ref{segol}: the $read\_sinta()$ process is essentially identical to the 
$read\_sint()$ process specified therein, except that instances of $read\_bool()$ are replaced
by instances of $read\_ba()$ (Section \ref{arithreadbool} using suitable contextualisation. 

A choice of context depends upon whether the bit is a data bit, follow bit, or sign bit, and the 
position of the bit within the binarisation: $context\_set$ consists of three parts -
\begin{itemize}
\item an array of follow contexts, $context\_set[follow]$ (indexed from 0 to 
$len(context\_set[follow])$
\item a single data context $context\_set[data]$ 
\item a sign context $context\_set[sign]$
\end{itemize}

Each follow context is used for decoding the corresponding follow bit, with the
last follow context being used for all subsequent follow bits (if any) also. 
The follow context selection function $follow\_context()$ is defined by:

\begin{pseudo}{follow\_context}{index, context\_set}
\bsCODE{pos= max(index, len(context\_set[follow])-1 }
\bsCODE{ctx_index = context\_set[follow][pos]}
\bsRET{\Contexts[ctx_index]}
\end{pseudo}

\paragraph{Unsigned integer decoding \\}

Unsigned integers are decoded by:

\begin{pseudo}{read\_uinta}{context\_set}
\bsCODE{value = 1}
\bsCODE{index = 0}
\bsWHILE{read\_ba(follow\_context(index,context\_set) )== \false}
  \bsCODE{value \ll = 1}
  \bsIF{read\_ba(\text{state[contexts]}[context\_set[data])])}
    \bsCODE{value += 1}
  \bsEND
  \bsCODE{index += 1}
\bsEND
\bsCODE{value -= 1}
\bsRET{value}
\end{pseudo}

\paragraph{Signed integer decoding \\}

$read\_sinta()$ decodes first the magnitude then the sign, as necessary:

\begin{pseudo}{read\_sinta}{context\_set}
\bsCODE{value=read\_uinta(context_set)}
\bsIF{value != 0}
  \bsIF{read\_ba(\Contexts[context\_set[sign])]) == \true}
    \bsCODE{value=-value}
  \bsEND
\bsEND
\end{pseudo}
